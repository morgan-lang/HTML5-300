<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <title>HTML5 APIs: Geolocation</title>
    <link rel="stylesheet" href="HTML5%20APIs_%20Geolocation_files/Lecture.css">
  </head>
  <body>
    <div id="errorMsgDiv" style="display:none;"></div>

    <h1 class="top">HTML5 APIs: Geolocation</h1>
    
    <div role="tablist" class="accordion h1 ui-accordion ui-widget ui-helper-reset">
      <h1 tabindex="0" aria-expanded="true" aria-selected="true" aria-controls="ui-accordion-1-panel-0" id="ui-accordion-1-header-0" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-accordion-header-active ui-state-active ui-corner-top ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-s"></span>Introduction</h1>
      <div aria-hidden="false" role="tabpanel" aria-labelledby="ui-accordion-1-header-0" id="ui-accordion-1-panel-0" style="display: block;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active">
        <p>
          The Geolocation API provides access to data regarding the 
location of the client's device. It is a high-level interface, 
abstracted from details of the device's hardware or the source of 
location data.
        </p>
        <p>
          If the device has a GPS receiver, access to it is generally 
provided. Other sources of location data include nearby cell towers and 
the IP address.
        </p>
        <p>
          There are some obvious privacy and security concerns regarding
 collecting user location data. Browsers are required to get the user's 
permission before providing data.
        </p>
      </div>
      <h1 tabindex="-1" aria-expanded="false" aria-selected="false" aria-controls="ui-accordion-1-panel-1" id="ui-accordion-1-header-1" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>Specification</h1>
      <div aria-hidden="true" role="tabpanel" aria-labelledby="ui-accordion-1-header-1" id="ui-accordion-1-panel-1" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
        The W3C maintains the specification for the Geolocation API at <a href="http://dev.w3.org/geo/api/spec-source.html" target="_blank">http://dev.w3.org/geo/api/spec-source.html</a>.
      </div>
      <h1 tabindex="-1" aria-expanded="false" aria-selected="false" aria-controls="ui-accordion-1-panel-2" id="ui-accordion-1-header-2" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>The Geolocation API</h1>
      <div aria-hidden="true" role="tablist" aria-labelledby="ui-accordion-1-header-2" id="ui-accordion-1-panel-2" style="display: none;" class="accordion h2 ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion ui-widget">
        <h2 tabindex="0" aria-expanded="true" aria-selected="true" aria-controls="ui-accordion-ui-accordion-1-panel-2-panel-0" id="ui-accordion-ui-accordion-1-panel-2-header-0" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-accordion-header-active ui-state-active ui-corner-top ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-s"></span>The <em>Geolocation</em> object</h2>
        <div aria-hidden="false" role="tabpanel" aria-labelledby="ui-accordion-ui-accordion-1-panel-2-header-0" id="ui-accordion-ui-accordion-1-panel-2-panel-0" style="display: block;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active">
          The global <code>navigator</code> object holds a reference, <code>navigator.geolocation</code> to a <em>Geolocation</em> object, which provides the API. (Of course it is wise to check for the presence of this before attempting to use it.)
        </div>
        <h2 tabindex="-1" aria-expanded="false" aria-selected="false" aria-controls="ui-accordion-ui-accordion-1-panel-2-panel-1" id="ui-accordion-ui-accordion-1-panel-2-header-1" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>Methods</h2>
        <div aria-hidden="true" role="tabpanel" aria-labelledby="ui-accordion-ui-accordion-1-panel-2-header-1" id="ui-accordion-ui-accordion-1-panel-2-panel-1" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
          <code>navigator.geolocation</code> offers three methods:
          <ul>
            <li><code>getCurrentPosition()</code> provides location on a one-time basis</li>
            <li><code>watchPosition()</code> regularly updates the location. It returns a handle identifying the watch operation</li>
            <li><code>clearWatch()</code> accepts this handle as an argument and terminates the watch operation</li>
          </ul>
        </div>
        <h2 tabindex="-1" aria-expanded="false" aria-selected="false" aria-controls="ui-accordion-ui-accordion-1-panel-2-panel-2" id="ui-accordion-ui-accordion-1-panel-2-header-2" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>Arguments</h2>
        <div aria-hidden="true" role="tabpanel" aria-labelledby="ui-accordion-ui-accordion-1-panel-2-header-2" id="ui-accordion-ui-accordion-1-panel-2-panel-2" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
          The <code>getCurrentPosition()</code> and <code>watchPosition()</code> methods accept the same three arguments:
          <ul>
            <li>a <em>successCallback</em> function</li>
            <li>an optional <em>errorCallback</em> function</li>
            <li>an optional <em>options</em> object</li>
          </ul>
        </div>
        <h2 tabindex="-1" aria-expanded="false" aria-selected="false" aria-controls="ui-accordion-ui-accordion-1-panel-2-panel-3" id="ui-accordion-ui-accordion-1-panel-2-header-3" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>Position</h2>
        <div aria-hidden="true" role="tabpanel" aria-labelledby="ui-accordion-ui-accordion-1-panel-2-header-3" id="ui-accordion-ui-accordion-1-panel-2-panel-3" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
          <p>
            The <em>successCallback</em> function will receive a <em>Position</em> object, which has two member properties:
            </p><ul>
              <li><code>coords</code>, which has several properties:
                <ul>
                  <li><code>latitude</code>, in degrees (north is positive)</li>
                  <li><code>longitude</code>, in degrees (east is positive)</li>
                  <li><code>altitude</code>, in meters</li>
                  <li><code>speed</code>, in meters/second</li>
                  <li><code>heading</code>, in degrees, clockwise from true north, representing the direction of movement</li>
                  <li><code>accuracy</code>, in meters, of latitude and longitude</li>
                  <li><code>altitudeAccuracy</code>, in meters</li>
                </ul>
              </li>
              <li><code>timestamp</code>, given in milliseconds</li>
            </ul>
          <p></p>
          <p>
            Only <code>coords.latitude</code>, <code>coords.longitude</code>, <code>coords.accuracy</code>, and <code>timestamp</code> are required; the rest may be null. The value of <code>coords.heading</code> may be NaN if the device is stationary.
          </p>
        </div>
        <h2 tabindex="-1" aria-expanded="false" aria-selected="false" aria-controls="ui-accordion-ui-accordion-1-panel-2-panel-4" id="ui-accordion-ui-accordion-1-panel-2-header-4" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>Options</h2>
        <div aria-hidden="true" role="tabpanel" aria-labelledby="ui-accordion-ui-accordion-1-panel-2-header-4" id="ui-accordion-ui-accordion-1-panel-2-panel-4" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
          The <em>options</em> argument to <code>getCurrentPosition()</code> and <code>watchPosition()</code> should be an object with these properties:
          <ul>
            <li><code>enableHighAccuracy</code>, a boolean.</li>
            <li><code>maximumAge</code>, in milliseconds, to allow for already acquired location data</li>
            <li><code>timeout</code>, in milliseconds: how long to wait before giving up</li>
          </ul>
          The spec is not specific, but if <code>enableHighAccuracy</code> is <code>true</code>,
 GPS will probably be used, if available. This can take longer to 
acquire a location and can have a serious impact on battery life, 
especially with <code>watchPosition</code>.
        </div>
        <h2 tabindex="-1" aria-expanded="false" aria-selected="false" aria-controls="ui-accordion-ui-accordion-1-panel-2-panel-5" id="ui-accordion-ui-accordion-1-panel-2-header-5" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>Error codes</h2>
        <div aria-hidden="true" role="tabpanel" aria-labelledby="ui-accordion-ui-accordion-1-panel-2-header-5" id="ui-accordion-ui-accordion-1-panel-2-panel-5" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
          If you provide an <em>errorCallback</em>, and you should, then on error your callback will receive an object with a <code>code</code> property. If your argument is <code>error</code>, then <code>error.code</code> may be one of
          <ul>
            <li><code>error.PERMISSION_DENIED</code></li>
            <li><code>error.POSITION_UNAVAILABLE</code></li>
            <li><code>error.TIMEOUT</code></li>
          </ul>
        </div>
      </div>
      <h1 tabindex="-1" aria-expanded="false" aria-selected="false" aria-controls="ui-accordion-1-panel-3" id="ui-accordion-1-header-3" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>Simple example</h1>
      <div aria-hidden="true" role="tabpanel" aria-labelledby="ui-accordion-1-header-3" id="ui-accordion-1-panel-3" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
        <pre>var navGeoLoc = navigator.geolocation;
if ( navGeoLoc )
{
    navGeoLoc.getCurrentPosition(
        function successCallback( position )
        {
            console.log( 'Position at ' + new Date( position.timestamp ) );
            console.log( ' Latitude: ' + position.coords.latitude + '°' );
            console.log( ' Longitude: ' + position.coords.longitude + '°' );
            console.log( ' Accuracy: ' + position.coords.accuracy + 'm' );
        },
        function errorCallback( error )
        {
            var message;
            switch ( error.code )
            {
            case error.PERMISSION_DENIED:
                message = "Geolocation permission denied.";
                break;
            case error.POSITION_UNAVAILABLE:
                message = "Geolocation position unavailable.";
                break;
            case error.TIMEOUT:
                message = "Geolocation timed out.";
                break;
            }
            message += '\n' + error.message;
            console.log( message );
        },
        {
            enableHighAccuracy: false,
            maximumAge: 86400000, //1 day
            timeout: 60000 //1 min
        } );
}
else
{
    console.log( 'No geolocation support' );
}
        </pre>
        <button type="button" class="runCode">Run</button>
      </div>
      <h1 tabindex="-1" aria-expanded="false" aria-selected="false" aria-controls="ui-accordion-1-panel-4" id="ui-accordion-1-header-4" role="tab" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>Richer example</h1>
      <div aria-hidden="true" role="tabpanel" aria-labelledby="ui-accordion-1-header-4" id="ui-accordion-1-panel-4" style="display: none;" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
        <a href="http://epsilondelta.us/WhereAmI/" target="_blank">Where Am I?</a>
      </div>
    </div>
    
    <button type="button" id="accordionToggle">Expand sections</button>
    

    <script src="HTML5%20APIs_%20Geolocation_files/jquery-2.js"></script>
    <script src="HTML5%20APIs_%20Geolocation_files/jquery-ui.js"></script>
    <script src="HTML5%20APIs_%20Geolocation_files/Lectures.js"></script>
  

</body></html>